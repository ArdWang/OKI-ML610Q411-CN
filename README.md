# OKI-ML610Q411-CN
ML610Q411/ML610Q412/ML610Q415-中文手册

## 前言

这个手册是描述操作8位微型控制芯片 ML610Q411/ML610Q412/ML610Q415.

跟随提供的手册,读他们的要点:

1. nX-U8/100核心指令手册 描述nX-U8/100核心基本的结构和相互指令
2. MACU8 汇编程序包用户手册
描述操作可重定位汇编程序、链接器、库管理器和对象转换器的方法，以及汇编语言的规范。
3. CCU8用户手册
操作编译器方法的说明
4. CCU8编程指南
编程方法说明。
5. CCU8语言参考
语言规范说明。
6. DTU8调试器用户手册
操作调试器DTU8的方法说明。
7. IDEU8用户手册
集成开发环境IDEU8的说明。
8. uEASE用户手册
片上调试工具uEASE的说明。
9. uEASE ML610Q400连接手册
uEASE与ML610Q400系列连接说明。
10. 关于Flash Writer主机程序的用户手册说明。


## 符号


数值         

## 第一章

该LSI是一种高性能的8位CMOS微控制器，内置了丰富的外围电路，如同步串口、UART、I2C总线接口（master）、蜂鸣器驱动器、电池电量检测电路、RC振荡型a/D转换器、12位逐次逼近型a/D转换器和LCD驱动器，在8位CPU nX-U8/100周围合并。
CPU nX-U8/100采用三级流水线结构并行处理，能够在单指令单时钟模式下高效执行指令。作为程序存储器安装的Flash-ROM实现相当于掩模ROM的低电压低功耗操作（读取操作），并且最适合电池驱动的应用。安装的片上调试功能可以进行程序调试和编程。

•CPU
−8位RISC CPU（CPU名称：nX-U8/100）
−指令系统：16位指令
−指令开始：传输、算术运算、比较、逻辑运算、乘法/除法、位
操作，位逻辑操作，跳转，条件跳转，调用返回堆栈操作，
算术移位等−片上调试功能
−最小指令执行时间30.5μs（@32.768 kHz系统时钟）2μs（@500kHz系统时钟）

•内部存储器
−内部16KB闪存ROM（8K×16位）（包括不可用的1KB测试区）−内部1KB数据RAM（1024×8位）

•中断控制器
−2个不可屏蔽中断源
内部源：1（看门狗定时器）
外部来源：1（NMI）
−19个可屏蔽中断源
内部源：15（SSIO、SA-A/D转换器、I2C、定时器0、定时器1、定时器2、定时器3、1kHz定时器、UART、RC-A/D转换器、PWM、TBC128Hz、TBC32Hz、TBC16Hz、TBC2Hz）
外部来源：4（P00、P01、P02、P03）

•时基计数器
−低速时基计数器×1通道
频率补偿（补偿范围：约−488ppm至+488ppm。补偿精度：约。
0.48ppm，适用于ML610Q411/Q412）-高速时基计数器×1通道

•看门狗定时器
−不可屏蔽中断和复位
−自由运行
−溢流周期：4种可选类型
ML610Q411/Q412：125ms、500ms、2s和8s ML610Q415：约131ms、524ms、2.1s、8.4s

•定时器
−8位×4通道（定时器0-3：使用定时器0-1或定时器2-3提供16位×2配置）
−时钟频率测量模式（在使用定时器2-3的16位配置的一个信道中，ML610Q415没有
没有此模式）

•1 kHz定时器
−中断功能
ML610Q411/Q412:10 Hz/1 Hz中断ML610Q415:9.5Hz/0.95Hz中断

•捕获
−时基捕获×2个通道
ML610Q411/Q412:4096 Hz至32 Hz ML610Q415:3906Hz~30.5H

•脉宽调制
−分辨率16位×1通道

•同步串行端口
−主/从可选
−LSB优先/MSB优先可选
−8位长度/16位长度可选

•通用异步收发器
-半双工通信
−TXD/RXD×1通道
−位长度、奇偶校验/无奇偶校验、奇偶校验/偶校验、1个停止位/2个停止位−正逻辑/负逻辑可选
−内置波特率发生器

•I2C总线接口
−仅主功能
−标准模式(500kHz时为50kbps)

•蜂鸣器驱动器
−4种输出模式，8个频率，16个占空比

•RC振荡型A/D转换器
−24位计数器
−时分×2通道
−转换时间：46us/1ch@500kHz

•逐次逼近型A/D转换器−12位A/D转换器
−输入×2通道

•通用端口
−不可屏蔽中断输入端口×1通道
−仅输入端口×6通道（包括辅助功能）
−仅输出端口×3个通道（包括辅助功能）−输入/输出端口
ML610Q411:22路（含二次功能）ML610Q412:14路（含二次功能）ML610Q415:22路（含二次功能）

•LCD驱动器
−段数
ML610Q411:最大144点（36段×4 com）ML610Q412:最大176点（44段×4 com）ML610Q415:最大144点（36段×4 com）
−1/1至1/4负载
−1/3偏置（内置偏置产生电路）−帧频可选择
ML610Q411/Q412：约64 Hz、73 Hz、85 Hz和102 Hz
ML610Q415：约61Hz、70Hz、81Hz、97Hz
−偏置电压倍增时钟可选（8种类型）
对比度调整（32步）
−LCD驱动停止模式、LCD显示模式、所有LCD打开模式和所有LCD关闭模式可选

•重置
−通过复位引脚复位
−上电时产生上电重置
−检测到低速时钟振荡停止时复位（ML610Q411PC和ML610Q415没有
此函数）
−通过看门狗定时器（WDT）溢出复位

•电源电压检测功能
−判断电压：16级之一−判断精度：±2%（典型值）

•时钟
−低速时钟
ML610Q411/ML610Q412：晶体振荡（32.768 kHz）
（此LSI不能保证在没有低速晶体振荡时钟的情况下工作）ML610Q415:1/16内置RC振荡500 kHz（31.25kHz）*
（此LSI没有低速晶体振荡时钟）
*此时钟不用于CPU操作时钟。
−高速时钟：
内置RC振荡（500 kHz）外部时钟（500 kHz或以下）
−高速时钟齿轮：1/2（250kHz）、1/4（125kHz）、1/8（62.5kHz：默认）
−通过软件选择高速时钟模式：
内置RC振荡，外部时钟

•电源管理
−暂停模式：CPU的指令执行暂停（外围电路处于工作状态）。
−停止模式：停止低速振荡和高速振荡（CPU和外围电路的操作）
已停止。）
−高速时钟齿轮：高速系统时钟的频率可以通过软件（1/1、1/2、1/4或
振荡时钟的1/8）
−块控制功能：关闭未使用外设电路的电源（复位寄存器和停止时钟电源）

•装运
−芯片（模具）
ML610Q411 xxxWA（空白产品：ML610Q411-NNNWA）ML610Q411P xxxWA（空白）产品：ML610Q411P-NNNWA)ML610Q411PA xxxWA（空白产品：ML610Q411PA-NNNWA)ML610Q411PC xxxWA（空白产品：ML610Q411PC-NNNWA)ML610Q412 xxxWA（空白产品：ML610Q412-NNNWA）ML610Q412P xxxWA（空白）产品：ML610Q412P-NNNWA)ML610Q415 xxxWA（空白产品：ML610Q415-NNNWA）
ML610Q411/ML610Q412/ML610Q415用户手册
−120针塑料LQFP
ML610Q411-xxxTBZ03A（空白产品：ML610Q411-NNNTBZ03A）
ML610Q411P-xxxTBZ03A（空白产品：ML610Q411P-NNNTBZ03A）
ML610Q411PA-xxxTBZ03A（空白产品：ML610Q411PA-NNNTBZ03A）
ML610Q411C-xxxTBZ03A（空白产品：ML610Q411C-NNNTBZ03A）
ML610Q412-xxxTBZ03A（空白产品：ML610Q412-NNNTBZ03A）
ML610Q412P-xxxTBZ03A（空白产品：ML610Q412P-NNNTBZ03A)
ML610Q415-xxxTBZ03A（空白产品：ML610Q415-NNNTBZ03A）
xxx:ROM代码
P：宽温度范围版本
A:低速时钟振荡停止检测重置可选择为始终禁用（请参阅中的第3章和第4章）
更详细的用户手册）。
C:EMS公差改进版/硬件非活动低速时钟振荡停止检测重置（参见
用户手册的第3章和第4章了解更多详细信息）WA:芯片
TB：TQFP
•保证工作范围
−工作温度：−20°C至+70°C（P型：−40°C至+85°C）−工作电压：VDD=1.1V至3.6V，AVDD=2.2V至3.6V

#### 1.2 1.2.1
ML610Q411/ML610Q415功能框图配置
“*”表示每个端口的第二或第三功能*'表示ML610Q415没有晶体振荡。

![image-20210326112459538](/Users/rnd/Library/Application Support/typora-user-images/image-20210326112459538.png)

#### 1.2.2
ML610Q412方框图
“*”表示每个端口的第二或第三功能。

![AC1BDC32-7A25-4F0B-ADFF-E0BF75735459](/Users/rnd/Library/Containers/com.tencent.qq/Data/Library/Application Support/QQ/Users/278161009/QQ/Temp.db/AC1BDC32-7A25-4F0B-ADFF-E0BF75735459.png)

#### 1.3
1.3.1 1.3.1.1
别针
引脚布局
ML610Q411/ML610Q415引脚布局
120针TQFP封装

![81502D10-9F2E-4820-9E11-3E892D478DF6](/Users/rnd/Library/Containers/com.tencent.qq/Data/Library/Application Support/QQ/Users/278161009/QQ/Temp.db/81502D10-9F2E-4820-9E11-3E892D478DF6.png)

（NC）：无连接
注：
P30到P35的分配不正常。

图1-3 ML610Q411/ML610Q415封装引脚布局



#### 1.3.1.2 ML610Q412引脚布局
90针
120针TQFP封装

图在PDF的第23页 图1-4 ML610412

#### 1.3.1.3 ML610Q411/ML610Q415芯片引脚布局

图在PDF 第24页里面

*仿真垫
注：这些虚拟垫是可见的，并没有任何功能，他们是放置在一个机械评估天青石半导体。请不要将引线连接到虚拟焊盘上。
注：

1–9
37（NC）

P30到P35的分配不正常。
芯片尺寸：
记数：
最小焊盘间距：
衬垫孔径：
切屑厚度：
芯片背面电压：
2.836mm x 2.636mm 95针
80微米
70μm×70μm
350μm VSS电平

图1-5
ML610Q411/ML610Q415芯片尺寸

#### 1.3.1.4 ML610Q412芯片引脚布局

图在 PDF 的第25页当中

*仿真垫
注：这些虚拟垫是可见的，并没有任何功能，他们是放置在一个机械评估天青石半导体。请不要将引线连接到虚拟焊盘上。

注：P30到P35的分配不正常。

芯片尺寸：
记数：
最小焊盘间距：
衬垫孔径：
切屑厚度：
芯片背面电压：
2.836mm x 2.636mm 95针
80微米
70μm×70μm
350μm VSS电平



#### 1.3.1.5 ML610Q411/ML610Q415芯片的焊盘坐标

表1-1
ML610Q411/ML610Q415的焊盘坐标

PDF图 第26页

#### 1.3.1.6 ML610Q412芯片的焊盘坐标

ML610Q412的焊盘坐标

PDF图 第27页

#### 1.3.2 引脚表

PDF图 第28-29页

-----------

端口编号    端口名称   I/O口   方法

-------------------------------------------------

2，24，45，47    VSS         /             负极电源引脚 

-------

22, 46       VDD          /             正极电源引脚

----

23           VDDL        /              电源引脚内部逻辑（内部生成）

------

25       VDDX      /         低速振荡电源引脚（内部产生）

------------

1           VPP   /         闪存ROM电源引脚

------

28         AVSS    连续逼近型ADC负电源引脚

-----

30  AVDD  连续逼近型ADC正电源引脚

---

65 VL1 LCD偏置电源引脚（内部生成）

---

64 VL2 LCD偏置电源引脚（内部生成）

----

63 VL3 LCD偏置电源引脚（内部生成）

---

62 C1 用于产生LCD偏压的电容器连接引脚

---

61 C2 用于产生LCD偏压的电容器连接引脚

---

21 TEST I/O 测试用输入/输出引脚

---

8 RESET_N 复位输入引脚

---

27    XT0（*3） I  低速时钟振荡引脚

---

26   XT1(*3)   O  低速时钟振荡引脚

---

29    VREF   /  逐次逼近型模数转换器的参考电源引脚

---

36   AIN0    I  逐次逼近型ADC输入

---

37  AIN1   I   逐次逼近型ADC输入

---

40  NMI    I  不可屏蔽中断引脚

----

41 P00/EX10/CAP0    I  输入端口，外部中断0，捕获0输入

----

42  P01/EX12/RXD0  I 输入端口，外部中断1，扑获1输入

---

43  P02/EX12/RXD0  I  输入端口，外部中断2 UART0接收

----

44    P03/EX13  I     输入端口，外部中断3

--------

38    P10   I      输入端口

----

39    P11  I     输入端口

-------

3       P20/LED0   O     输出端口

----

4       P21/LED1    O     输出端口

----

5       P22/LED2    O   输出端口

----

15      P30      I/O     输入/输出端口

------

16     P31       I/O     输入/输出端口

-----

17     P34      I/O     输入/输出端口

----

18     P32      I/O      输入/输出端口

---

19     P33      I/O     输入/输出端口

---

20     P35     I/O       输入/输出端口

----

6       P40     I/O      输入/输出端口

---

7      P41       I/O    输入/输出端口

---

9      P42      I/O     输入/输出端口

---

10     P43     I/O    输入/输出端口

----

11      P44/T02P0CK     I/O   输入/输出端口，定时器0/定时器2/PWM0外部输入1时钟输入

---

12      P45/T13P1CK     I/O     输入/输出端口，定时器1/定时器3外部时钟输入

---

13        P46       I/O       输入/输出端口

---

14         P47     I/O       输入/输出端口

---

106       PA0(*1) / SEG43(*2)        输入输出 / LCD段引脚

-----

107        PA1(*1) / SEG42(*2)     输入输出 /  LCD段引脚

---

108         PA2（*1）/ SEG41(*2)      输入输出端口 / LCD段引脚

---

109        PA3（1）/ SEG40(2)    输入输出端口 / LCD段引脚

---

110       PA4(1)   /  SEG39(2)    输入输出端口 / LCD段引脚

----

111        PA5(1)  /    SEG38(2)      输入输出端口 / LCD段引脚

---

112      PA6(1) / SEG37(2)      输入输出端口 / LCD段引脚

---

113      PA7(1) / SEG36(2)     输入输出端口 / LCD段引脚

---

69       COM0     LCD公共引脚

---

68       COM1     LCD公共引脚

---

67       COM2     LCD公共引脚

---

66       COM3     LCD公共引脚

---

70       SEG0       LCD段引脚

---

71       SEG1       LCD段引脚

---

72       SEG2       LCD段引脚

77~105  SEG3~SEG35 LCD段引脚

---

（*1）ML610Q411和ML610Q415上的针脚。
（*2）ML610Q412上的引脚。
（3）ML610Q415没有低速晶体振荡功能，但XT0引脚必须绑定到VSS。

---

RESET_N       重置输入引脚。当该引脚被设置为“L”级时，系统复位模式被设置，内部部分被初始化。当该引脚随后被设置为“H”级时，程序开始执行。上拉电阻器内部连接。

---

XT0 / XT1  低速时钟的晶体连接引脚。
32.768 kHz晶体振荡器（见测量电路1）连接到该引脚。电容器CDL和CGL根据需要通过该引脚和VSS连接。ML610Q415没有晶体振荡功能，但在ML610Q415上连接XT0到VSS，不连接XT1。

---

OSC0     高速外部时钟输入引脚。该引脚用作P10的辅助功能。

---

LSCLK    低速时钟输出引脚。该引脚用作P20引脚的辅助功能。

---

OUTCLK    高速时钟输出引脚。该引脚用作P21引脚的辅助功能

---

通用输入端口

---

P00-P03     通用输入端口。由于这些引脚具有辅助功能，因此当使用辅助功能时，插脚不能用作端口。

---

P10-P11      通用输入端口。由于这些管脚具有辅助功能，因此在使用辅助功能时，管脚不能用作端口。

---

通用输出端口

---

P20-P22       通用输出端口。由于这些管脚具有辅助功能，因此管脚不能用作辅助功能使用辅助功能时的端口。

---

通用输入/输出端口

---

P30-P35       通用输入/输出端口。由于这些管脚具有辅助功能，因此在使用辅助功能时，管脚不能用作端口。

---

P40-P47      通用输入/输出端口。由于这些管脚具有辅助功能，因此在使用辅助功能时，管脚不能用作端口。

---

PA0-PA7    通用输入/输出端口。这些引脚用于ML610Q411和ML610Q415，但ML610Q412中未提供。

---

UART

---

TXD0      UART数据输出引脚。该引脚用作P43引脚的辅助功能。

---

RXD0    UART数据输入引脚。该引脚用作P42的辅助功能或P02引脚的主要功能。

---

I2C 总线接口

---

SDA     I2C数据输入/输出引脚。该引脚用作P40引脚的辅助功能。此引脚具有NMOS开漏输出。当使用此引脚作为I2C的功能时，从外部连接上拉电阻器。

---

SCL    I2C数据输出引脚 。该引脚用作P41引脚的辅助功能。此引脚具有NMOS开漏输出。当使用此引脚作为I2C的功能时，从外部连接上拉电阻器。

---

同步串行（SSIO）

---

SCK0   同步串行时钟输入/输出引脚。该引脚用作P41或P45引脚的第三功能。

---

SIN0    同步串行数据输入引脚。该引脚用作P40或P44引脚的第三功能

---

SOUT0     同步串行数据输出引脚。该引脚用作P42或P46引脚的第三功能。

----

PWM

---

PWM0    PWM0输出引脚。该引脚用作P43或P34引脚的第三功能。

---

T02P0CK    PWM0外部时钟输入引脚。该引脚用作P44引脚的主要功能。

---

外部中断

---

NMI    外部不可屏蔽中断输入引脚。在两条边上生成中断

---

EXI0-3    外部可屏蔽中断输入引脚。软件可以为每个位执行中断启用和边缘选择。这些引脚用作P00-P03引脚的主要功能。

---

CAP0    /  CAP1  捕捉触发器输入引脚。时基计数器的值与软件选择的中断边同步地捕获在寄存器中。这些针脚用作P00针脚（CAP0）和P01针脚（CAP1）的主要功能。

---

T02P0CK   用于定时器0和定时器2的外部时钟输入引脚。这些计时器的时钟由软件选择。该引脚用作P44引脚的主要功能。

---

T13P1CK    用于定时器1和定时器3的外部时钟输入引脚。这些计时器的时钟由软件选择。该引脚用作P45引脚的主要功能。

---

蜂鸣器

---

BZ0   蜂鸣器信号输出引脚。此引脚用作P22引脚的辅助功能。

---

LED 驱动器

---

LED0-2   Nch开漏输出引脚驱动LED。

---

RC振荡型A/D转换器

---

IN0   通道0振荡输入引脚。该引脚用作P30引脚的辅助功能。

---

CS0   通道0参考电容器连接引脚。该引脚用作P31引脚的辅助功能。

---

RCT0   用于测量的通道0的电阻/电容传感器连接引脚。该引脚用作P33引脚的辅助功能。

---

RS0   该引脚用作P32引脚的辅助功能，P32引脚是通道0的参考电阻器连接引脚。

---

RT0   用于测量的通道0的电阻传感器连接引脚。该引脚用作P34引脚的辅助功能。

---

RCM   RC振荡监视器引脚。该引脚用作P35引脚的辅助功能。

---

IN1   通道1的振荡输入引脚。该引脚用作P44引脚的辅助功能。

---

CS1   通道1的参考电容器连接引脚。该引脚用作P45引脚的辅助功能。

---

RS1   通道1的参考电阻器连接引脚。该引脚用作P46引脚的辅助功能。

---

RT1   用于通道1测量的电阻传感器连接引脚。该引脚用作P47引脚的辅助功能。

---

逐次逼近型A/D转换器

---

AVSS   逐次逼近型A/D转换器的负电源引脚

---

AVDD   逐次逼近型A/D转换器的正电源引脚

---

VREF    逐次逼近型A/D转换器的基准电源引脚

---

AIN0   通道0模拟输入逐次逼近型A/D转换器

---

A1N1  通道1模拟输入逐次逼近型A/D转换器

---

LCD驱动信号

---

COM0-3     公共输出引脚。

---

SEG0-35    段输出引脚

---

SEG36-43   段输出引脚。这些引脚在610Q412之前，但ML610Q411和ML610Q415中未提供。

---

LCD驱动电源

---

VL1 / VL2 / VL3    LCD偏置电源引脚（内部产生）。电容器Ca、Cb、VL2-和Cc（见测量电路1）连接在VSS和VL1、VL2之间，
和VL3。

---

C1 / C2  LCD偏置电源引脚（内部产生）。电容器C12连接在C1和C2之间。

---

TEST   用于测试的输入/输出引脚。一个下拉电阻器内部连接。

---

电源提供

---

VSS   负极电源引脚。

---

VDD    I/O、内部调节器、电池电量低探测器的正极电源引脚，上电复位。

----

VDDL   内部逻辑的正电源引脚（内部生成）。电容器CL0和CL1（见测量电路1）连接在该引脚和VSS之间。

---

VDDX  正电源引脚（内部产生）用于低速振荡。使用ML610Q411和ML610Q412时，将电容器Cx（参见测量电路1）连接在此引脚和VSS之间。使用ML610Q415时，将此引脚直接连接到Vss。

---

VPP    用于编程闪存ROM的电源引脚。下拉电阻器内部连接。

---

#### 1.3.4 未使用引脚的端接

表1-3显示了端接未使用引脚的方法。PPT 35页

推荐的引脚端接

注：
建议将未使用的输入端口和输入/输出端口设置为具有下拉电阻器/上拉电阻器的输入或输出模式，因为如果在高阻抗输入设置中保持引脚打开，则电源电流可能变得过大。



## 第二章  CPU和内存空间

#### 2.1 前言

该大规模集成电路包括拉皮斯半导体公司原有的8位CPU nX-U8/100，存储器型号为“小型”。有关CPU nX-U8/100的详细信息，请参阅“nX-U8/100核心说明手册”。

#### 2.2 程序内存空间

程序内存空间用于存储程序代码、表数据（ROM窗口）或向量表。
程序代码的长度为16位，由16位程序计数器（PC）指定。
ROM窗口区域数据具有8位的长度，并且可以用作表数据。
矢量表有16位长的数据，可用作复位矢量、硬件中断矢量和软件中断矢量。
程序内存空间由1段组成，容量为16kbyte（8kword）。图2-1显示了程序内存空间的配置。

具体看 图 2-1配置程序的存储空间 PDF 37页

笔记：
−由于测试程序数据存储在段0的1024字节（512字）测试数据区（0:03C00H到0:03FFFH）中，
此区域不能用作程序代码区域。
−测试区域中的地址“0:03C00H至0:03DFFH”可写且可擦除。用“0FFH”填充该区域。如果
区域中的数据不确定或其他数据（即非0FFH），无法保证使用代码进行操作。
−在程序内存空间的未使用区域设置“0FFH”数据（BRK指令）。

#### 2.3 数据存储空间

该LSI的数据存储空间包括ROM窗口区、段0的1KB RAM区和SFR区以及段1和段8的ROM参考区。
数据存储器存储8位数据，由20位指定，其中高4位作为DSR，低16位作为每条指令指定的寻址。 

图2-2 展示配置数据存储空间 PDF 38页

笔记：
−系统复位时，1 KB RAM区域的内容未定义。通过软件初始化此区域。
−从段8的ROM参考区域读取程序存储器空间的段0的内容。



#### 2.4 指令长度

一条指令的长度是16位。

#### 2.5 数据类型

支持的数据类型包括字节（8位）和字（16位）。

#### 2.6 寄存器说明

##### 2.6.1 寄存器列表

0F000H     数据段寄存器     DSR    R/W    8   00H

##### 2.6.2 数据段寄存器（DSR）

地址: 0F000H 

访问: R/W 

访问大小: 8 bits 

初始值: 00H

DSR

DSR  7       6    5   4    3     2        1          0

---



R/W           DSR3 DSR2 DSR1 DSR0

---



R/W R/W R/W R/W R/W R/W R/W R/W R/W 

---



Initial value 0 0 0 0 0 0 0 0

---



DSR是一种保留数据段的特殊功能寄存器（SFR）。有关DSR的详细信息，请参阅“nX-U8/100 Core说明手册”。

[位描述]

图片 请看 PDF 40页



## 第三章 复位功能

#### 3 复位功能

##### 3.1 前言

此LSI具有如下所示的五种复位功能。如果满足五个重置条件中的任何一个，则此LSI进入系统重置模式。
•通过复位引脚复位
•通电检测复位
•通过低速振荡停止检测复位（ML610Q411PC和ML610Q415上不可用）
•通过第二个看门狗定时器（WDT）溢出复位
•通过执行BRK指令进行软件复位

##### 3.1.1 特性

•储能器引脚有一个内部上拉电阻器
•低速振荡停止检测时间为典型值。3毫秒（在ML610Q411PC和ML610Q415上不可用）•可以选择250毫秒、1秒、4秒或16秒作为看门狗定时器（WDT）溢出周期
•内置复位状态寄存器（RSTAT），指示复位产生原因
•只有CPU被BRK指令复位（RAM区域和SFR区域均未复位）。

##### 3.1.2 配置

图3-1显示了复位产生电路的配置。 PDF 42页

RSTAT：复位状态登记
（*）ML610Q411PA：低速振荡停止检测复位可由BLKCON4电阻器的DXTSP位控制。
ML610Q411PC:始终禁用低速振荡停止检测重置。

图3-1复位产生电路的配置

#### 3.2 寄存器说明

##### 3.2.1 寄存器列表

图 PDF 43页

(*)ML610Q411和ML610Q412上未定义，ML610Q411PC和ML610Q415上为“0”。
RSTAT是一个特殊功能寄存器（SFR），它指示产生复位的原因。
在发生复位时，RSTAT的内容没有初始化，而指示复位原因的位被设置为“1”。使用此功能检查复位原因时，应提前对RSTAT进行写操作，并将RSTAT的内容初始化为“00H”。

[位描述]•POR（位0）
POR位是一个标志，指示已生成上电复位。通电时该位设置为“1”。

0     未生成上电复位

1     已生成通电复位

•XSTR（位1）
XSTR位是一个标志，指示产生低速振荡停止检测复位。当低速振荡停止超过低速振荡停止检测时间（TSTOP）规定的时间时，该位设置为“1”。写入位无效，在ML610Q411PC和ML610Q415上读取时始终返回“0”。

0    未发生低速振荡停止检测复位

1     发生低速振荡停止检测复位

•WDTR（位2）
WSDTR是一个标志，指示生成看门狗定时器重置。当产生看门狗定时器溢出复位时，该位设置为“1”。

注：
没有提供指示复位引脚复位发生的标志。

#### 3.3 操作说明
##### 3.3.1系统复位模式的操作
系统重置在所有处理中具有最高优先级，并且在此之前执行的任何其他处理都将被取消。
系统复位模式由以下任何原因设置。
•重置
•通过电源检测复位
•通过低速振荡停止检测复位（ML610Q411PC和ML610Q415上不可用）•通过看门狗定时器（WDT）溢出复位
•通过BRK指令进行软件复位（仅CPU复位）
在系统复位模式下，执行以下处理。
（1） 电源电路已初始化，但未通过BRK指令执行的重置进行初始化。有关电源电路的详细信息，请参阅第28章“电源电路”。
（2） 初始化初始值未定义的所有特殊函数寄存器（SFR）。但是，由于BRK指令的执行，初始化不是通过软件重置来执行的。SFR的初始值见附录A“寄存器”。
（3） CPUIS已初始化。
•CPU中的所有寄存器都已初始化。
•程序存储器中地址0000H和0001H的内容被设置为堆栈指针（SP）。
•程序存储器中地址0002H和0003H的内容设置到程序计数器（PC）。
然而，当由BRK指令复位时的程序状态字（PSW）的中断电平（ELEEVL）为1或更低时，程序存储器的地址0004H和0005H的内容被设置在程序计数器中
（个人电脑）。有关BRK说明，请参阅“nX-U8/100 Core说明手册”。
注：
在系统复位模式下，数据存储器的内容和任何初始值未定义的SFR的内容不被初始化并且未定义。通过软件初始化它们。
在BRK指令的系统复位模式下，也不会初始化具有固定初始值的特殊功能寄存器（SFR）。因此，通过软件初始化这样的SFR。

